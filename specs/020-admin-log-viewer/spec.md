# Feature Specification: Admin Log Viewer

**Feature Branch**: `020-admin-log-viewer`  
**Created**: 2026-01-14  
**Status**: Draft  
**Input**: User description: "Draft a spec and plan for an admin to inspect security and gameplay logs."

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Review Recent Logs (Priority: P1)

As an operator, I want to review recent security and game events so I can investigate suspicious activity and confirm system health.

**Why this priority**: Operational visibility is required to act on the new security logging.

**Independent Test**: Can be tested by generating sample log events and verifying they appear in the admin view.

**Acceptance Scenarios**:

1. **Given** log events exist, **When** the operator opens the log viewer, **Then** the latest events are listed in reverse chronological order.
2. **Given** mixed log categories, **When** the operator filters by category, **Then** only matching events are shown.

---

### User Story 2 - Triage an Incident (Priority: P2)

As an operator, I want to search and filter logs by time range and severity so I can quickly isolate a problem.

**Why this priority**: Filtering reduces time to diagnose issues and alerts.

**Independent Test**: Can be tested by applying filters to known events and confirming the results.

**Acceptance Scenarios**:

1. **Given** events across a time range, **When** the operator selects a time window, **Then** only events within that window are shown.
2. **Given** events with different severities, **When** the operator selects a severity level, **Then** only matching events are shown.

---

### User Story 3 - Export a Snapshot (Priority: P3)

As an operator, I want to export a snapshot of the filtered logs so I can share it for follow-up.

**Why this priority**: Sharing evidence helps debugging and audit trails.

**Independent Test**: Can be tested by exporting a filtered set and validating the output fields.

**Acceptance Scenarios**:

1. **Given** a filtered view, **When** the operator exports, **Then** the exported file contains only the filtered events.

---

### Edge Cases

- What happens when there are no log events available?
- How does the system handle large volumes of logs when filtering?
- What happens if the export exceeds the maximum allowable size?

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: System MUST provide an admin-only log viewer for recent events, protected by username and password login.
- **FR-002**: System MUST allow filtering by time range, category, and severity.
- **FR-003**: System MUST allow searching by keyword across event fields.
- **FR-004**: System MUST support exporting the current filtered view.
- **FR-005**: System MUST redact or omit sensitive values from log display and exports.
- **FR-006**: System MUST include security and gameplay log categories in the admin viewer.
- **FR-007**: System MUST allow viewing logs up to 7 days back.

### Key Entities *(include if feature involves data)*

- **Log Event**: A recorded event with timestamp, category, severity, and details.
- **Log Filter**: Operator-selected criteria for narrowing events.
- **Export Snapshot**: A downloadable set of filtered log events.

### Assumptions

- Logs are already being generated by the backend.
- The admin log viewer is used only for operational inspection (not public).

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: Operators can view the latest log events within 2 seconds of opening the viewer.
- **SC-002**: Filtering reduces the displayed event list to only matching items with no false positives in sample tests.
- **SC-003**: Exported snapshots include timestamp, category, severity, and message for every event.
- **SC-004**: Sensitive values are not displayed or exported in sample security events.

## Clarifications

### Session 2026-01-14

- Q: Access control mechanism? → A: Username/password login.
- Q: Log categories included? → A: Security + gameplay events.
- Q: Log retention window for admin view? → A: 7 days.
